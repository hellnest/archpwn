# Maintainer: Martin Lee < hellnest.fuah@gmail.com >
# Contributor: Francesco Piccinno <stack.box@gmail.com>

pkgname=metasploit3
pkgver=3.6.0
pkgrel=1
pkgdesc="The Metasploit Framework is an advanced open-source platform for developing, testing, and using exploit code"
depends=('ruby' 'ruby-gtk2' 'ruby-libglade')
makedepends=('subversion')
groups=('archpwn' 'archpwn-exploits')
source=(http://www.updates.metasploit.com/data/releases/framework-$pkgver.tar.bz2)
url="http://www.metasploit.com/"
license=('custom')
arch=('any')
md5sums=('c40cd0b56a666316e91718d72ebec86c')

build() {
  cd $srcdir/msf3/

  echo "Updating ..." && svn up

  install -d $pkgdir/usr/share/$pkgname/ && \
  install -d $pkgdir/usr/share/licenses/$pkgname/ &&
  install -d $pkgdir/etc/profile.d/ &&
  cp -r * $pkgdir/usr/share/$pkgname/ &&
  install -Dm644 README $pkgdir/usr/share/licenses/metasploit3/README || return 1

  echo "export PATH=\$PATH:/usr/share/$pkgname/" > $pkgdir/etc/profile.d/$pkgname.sh
  chmod 0755 $pkgdir/etc/profile.d/$pkgname.sh
}

